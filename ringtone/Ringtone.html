<!doctype html>
<html lang="en">
<head>
  <!-- ads -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2396891171506215" crossorigin="anonymous"></script>
  <meta name="monetag" content="39dc43dfa4858eb858261e2f61225154">
  <script>(function(s){s.dataset.zone='9910680',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
  <script>(function(s){s.dataset.zone='9910403',s.src='https://forfrogadiertor.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RingtoneHub — Find & Download Beautiful Ringtones</title>
  <meta name="description" content="Modern, responsive ringtone library — search, preview, download and share mobile ringtones." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!--favicon-->
  <link rel="apple-touch-icon" sizes="180x180" href="/favico/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favico/favicon-16x16.png">
  <link rel="manifest" href="/favico/site.webmanifest">

  <style>
    :root {
      --bg1:#0f172a; 
      --bg2:#0b1220;
      --accent:#7c3aed;
      --accent-2:#06b6d4;
      --muted:rgba(255,255,255,0.65);
      --glass: rgba(255,255,255,0.04);
      --card: rgba(255,255,255,0.03);
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.18), transparent 10%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(6,182,212,0.12), transparent 10%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#fff;
      min-height:100%;
      display:flex;flex-direction:column;
    }
    header{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:10px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(2,6,23,0.6);flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:6px}
    .logo{width:48px;height:48px;border-radius:10px;background:conic-gradient(from 140deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800}
    .logo span{font-size:20px}
    .site-title{font-weight:700}
    .site-sub{font-size:12px;color:var(--muted)}
    .search{flex:1 1 200px;display:flex;align-items:center;gap:6px;min-width:120px}
    .search input{flex:1 1 auto;min-width:0;padding:8px 10px;border-radius:999px;border:0;background:var(--glass);color:inherit;font-size:14px}
    .search button{flex:0 0 auto;padding:6px 10px;border-radius:8px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021025;font-weight:600;cursor:pointer;font-size:13px;white-space:nowrap}
    .actions{display:flex;gap:6px;flex:0 0 auto}
    .btn-ghost{padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);cursor:pointer}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-top:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;display:flex;flex-direction:column;gap:10px}
    .meta{display:flex;align-items:center;justify-content:space-between}
    .title{font-weight:700}
    .tags{font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:8px}
    .play{padding:8px;border-radius:10px;border:0;background:rgba(255,255,255,0.04);cursor:pointer}
    .download{padding:8px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));cursor:pointer;font-weight:700}
    footer{margin-top:28px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);display:flex;justify-content:space-between;align-items:center}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{background:black;padding:18px;border-radius:12px;max-width:720px;width:100%}
    .modal.show{display:flex}
  </style>
</head>
<body>
<div class="container">
<header>
  <div class="brand">
    <div class="logo"><span>RH</span></div>
    <div>
      <div class="site-title">RingtoneHub</div>
      <div class="site-sub">Beautiful ringtones for every mood</div>
    </div>
  </div>
  <div class="search">
    <input id="search" placeholder="Search ringtones..." />
    <button id="searchBtn">Search</button>
  </div>
  <div class="actions">
    <a href="/index.html" class="btn-ghost">Home</a>
    <button id="uploadBtn" class="btn-ghost">Upload</button>
  </div>
</header>

<main>
  <h2>Ringtone Library (<span id="count">0</span>)</h2>
  <div class="grid" id="grid"></div>
</main>

<footer>
  <div>© <span id="year"></span> RingtoneHub</div>
</footer>
</div>

<!-- Upload Modal -->
<div class="modal-backdrop" id="uploadModal">
  <div class="modal">
    <h3>Upload Ringtone</h3>
    <p>Only signed-in users can upload new ringtones.</p>
    <input type="file" id="fileInput" accept="audio/*" />
    <div style="margin-top:12px;text-align:right;">
      <button class="btn-ghost" onclick="closeUpload()">Cancel</button>
      <button class="download" onclick="submitUpload()">Upload</button>
    </div>
  </div>
</div>

<!-- Download Success Modal -->
<div class="modal-backdrop" id="downloadModal">
  <div class="modal">
    <h3>Download Successful</h3>
    <p>All ringtones are uploaded by users or third parties. Copyright belongs to original creators.</p>
    <div style="text-align:right;">
      <button class="download" onclick="closeDownload()">OK</button>
    </div>
  </div>
</div>

<!-- Login Required Modal -->
<div class="modal-backdrop" id="loginModal">
  <div class="modal">
    <h3>Login Required</h3>
    <p>You must log in first to use this feature.</p>
    <div style="text-align:right;">
      <a href="/index.html" class="download">Go to Login</a>
    </div>
  </div>
</div>

<script>
const DATA = [
  {id:1,title:'Music',tags:['Sad'],src:'songs/Nepal1.m4a'},
  {id:2,title:'Calm Bansuri',tags:['Flute'],src:'songs/flute.mp3'}
];

const state = { data: DATA.slice(), shown: 8 };
const grid = document.getElementById('grid');
const count = document.getElementById('count');
document.getElementById('year').textContent = new Date().getFullYear();

// ✅ login state from localStorage
let isSignedIn = localStorage.getItem("isSignedIn") === "true";

function makeCard(item){
  const c = document.createElement('article');c.className='card';
  c.innerHTML = `
    <div class="meta">
      <div>
        <div class="title">${item.title}</div>
        <div class="tags">${item.tags.join(' • ')}</div>
      </div>
      <div class="controls">
        <button class="play" data-id="${item.id}">▶</button>
        <a class="download" href="${item.src}" download="${item.title}.mp3" data-id="${item.id}">Download</a>
      </div>
    </div>`;
  return c;
}

function render(){
  grid.innerHTML='';
  const toShow = state.data.slice(0,state.shown);
  toShow.forEach(item => grid.appendChild(makeCard(item)));
  count.textContent = toShow.length;
  attachDownloadHandlers();
}

const uploadBtn = document.getElementById('uploadBtn');
const uploadModal = document.getElementById('uploadModal');
uploadBtn.addEventListener('click', () => {
  if (!isSignedIn) {
    document.getElementById("loginModal").classList.add("show");
    return;
  }
  uploadModal.classList.add("show");
});
function closeUpload(){ uploadModal.classList.remove("show"); }
function submitUpload(){
  const file = document.getElementById('fileInput').files[0];
  if(!file){alert("Choose a file first.");return;}
  alert("Uploaded successfully (demo).");
  closeUpload();
}

// ===== Download Popup =====
const downloadModal = document.getElementById('downloadModal');
function closeDownload(){ downloadModal.classList.remove("show"); }

function attachDownloadHandlers(){
  document.querySelectorAll('.download').forEach(link=>{
    link.addEventListener('click', e=>{
      e.preventDefault();
      if (!isSignedIn) {
        document.getElementById("loginModal").classList.add("show");
        return;
      }
      const url = link.getAttribute('href');
      const filename = link.getAttribute('download') || 'file.mp3';
      fetch(url)
        .then(resp=>resp.blob())
        .then(blob=>{
          const blobUrl = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href=blobUrl; a.download=filename;
          document.body.appendChild(a); a.click(); document.body.removeChild(a);
          URL.revokeObjectURL(blobUrl);
          downloadModal.classList.add("show");
        })
        .catch(()=>alert('Server error occured!'));
    });
  });
}

render();
</script>
</body>
</html>
